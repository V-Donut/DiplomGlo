(()=>{"use strict";const e=({timing:e,draw:t,duration:n})=>{let o=performance.now();requestAnimationFrame((function l(a){let r=(a-o)/n;r>1&&(r=1);let s=e(r);t(s),r<1&&requestAnimationFrame(l)}))},t=()=>{const e=document.body;e.style.overflow="auto",e.style.marginRight=0},n=/[^а-яА-Яa-zA-Z]+/g,o=/[^+\d]+/g,l=({formId:e,someElem:l=[]})=>{const a=document.getElementById(e),r=document.querySelector(".header-modal"),s=document.querySelector(".services-modal"),i=document.querySelector(".overlay"),c=document.createElement("div");c.style.cssText="color: #00902a; line-height: 1; text-align: center; padding-top: 10px";try{if(!a)throw new Error("Верните форму на место!");a.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=a.querySelectorAll("input"),d=new FormData(a),u={};var m;c.textContent="Загрузка...",a.append(c),d.forEach(((e,t)=>{u[t]=e})),l.forEach((e=>{const t=document.getElementById(e.id),n=["","0"];t&&"block"===e.type&&-1===n.indexOf(t.textContent)?u[e.id]=t.textContent:t&&"input"===e.type&&-1===n.indexOf(t.value)&&(u[e.id]=t.value)})),(e=>{let t=!0;return e.forEach((e=>{const l=e.getAttribute("name"),a=e.value.trim();("fio"===l&&(null!==a.match(n)||a.length<2)||"phone"===l&&(null!==a.match(o)||a.length<6||a.replace("+","").length>16))&&(t=!1)})),t})(e)?(m=u,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((n=>{c.textContent="Спасибо! Наш менеджер с Вами свяжется!",e.forEach((e=>{"hidden"!==e.getAttribute("type")&&(e.value="")})),setTimeout((()=>{c.textContent="",r.style.display="none",s.style.display="none",i.style.display="none",t()}),3e3)})).catch((e=>{c.textContent="Ошибка..."})):(c.textContent="",alert("Данные не валидны!"))})()}))}catch(e){console.log(e.message)}};(()=>{const n=document.querySelector(".header-modal"),o=document.querySelector(".services-modal"),l=document.querySelector(".image-modal"),a=document.querySelector(".overlay"),r=t=>{t.style.top="-30%",t.style.display="block",a.style.display="block",(()=>{const e=document.body;e.style.overflow="hidden";const t=(()=>{let e=document.createElement("div");e.style.width="500px",e.style.height="500px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t})();e.style.marginRight=`${t}px`})(),e({duration:500,timing:e=>e,draw(e){t.style.top=50*e+"%"}})},s=e=>{e.style.display="none",a.style.display="none",t()};document.addEventListener("click",(e=>{if(e.target.classList.contains("request-call")||e.target.closest(".request-call"))e.preventDefault(),r(n);else if(e.target.classList.contains("call-measurer"))e.preventDefault(),r(o);else if(e.target.classList.contains("document-overlay")){e.preventDefault();const t=e.target.parentNode.getAttribute("href"),n=l.querySelector(".box-modal_body"),o=document.createElement("img");o.style.width="100%",o.setAttribute("src",t),n.innerHTML="",n.append(o),r(l)}else e.target.classList.contains("header-modal__close")?s(n):e.target.classList.contains("image-modal__close")?s(l):e.target.classList.contains("services-modal__close")?s(o):e.target.classList.contains("overlay")&&(s(n),s(o),s(l))}))})(),(()=>{const t=document.getElementById("calc");if(!t)return;const n=document.getElementById("calc-type"),o=document.getElementById("calc-type-material"),l=document.getElementById("calc-input"),a=document.getElementById("calc-total");let r=0;t.addEventListener("input",(t=>{t.target!==n&&t.target!==o&&t.target!==l||(()=>{const t="--"!==n.value?n.value:0,s="--"!==o.value?o.value:0;let i=l.value,c=0;if(!t||!s)return void(a.value="");""===l.value&&(i=0),c=i*t*s;let d=r;r=c,e({duration:500,timing:e=>e,draw:c>d?e=>{e*c>d&&(a.value=Math.trunc(e*c))}:e=>{let t=Math.trunc((1-e)*d);a.value=t>c?t:Math.trunc(c)}})})()})),l.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D+/,"")}))})(),(e=>{const t=document.querySelectorAll(".timer-day"),n=document.querySelectorAll(".timer-hours"),o=document.querySelectorAll(".timer-minutes"),l=document.querySelectorAll(".timer-seconds"),a=e=>1===e.toString().length?"0"+e:e,r=s=>{let i=(()=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3,n=Math.floor(t/60/60/24),o=Math.floor(t/60/60%24),l=Math.floor(t/60%60),a=Math.floor(t%60);return t<=0&&(n=0,o=0,l=0,a=0),{timeRemaining:t,days:n,hours:o,minutes:l,seconds:a}})();for(let e=0;e<t.length;e++)t[e].textContent=a(i.days),n[e].textContent=a(i.hours),o[e].textContent=a(i.minutes),l[e].textContent=a(i.seconds);s&&i.timeRemaining>0&&setInterval(r,1e3,!1)};r(!0)})("16 april 2022"),new Swiper(".our-services",{loop:!0,autoplay:{delay:2500,disableOnInteraction:!1},navigation:{nextEl:".services__arrow--right",prevEl:".services__arrow--left"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},576:{slidesPerView:2,spaceBetween:20},1200:{slidesPerView:2,spaceBetween:40}}}),new Swiper(".our-benefits",{loop:!0,navigation:{nextEl:".benefits__arrow--right",prevEl:".benefits__arrow--left"},breakpoints:{320:{slidesPerView:1,spaceBetween:20},576:{slidesPerView:3,spaceBetween:40}}}),(()=>{const e=document.querySelector(".smooth-scroll"),t=document.querySelector(".section"),n=()=>{window.pageYOffset>t.offsetTop?e.style.display="block":e.style.display="none"};window.addEventListener("load",(()=>{n()})),window.addEventListener("scroll",(()=>{n()})),e.addEventListener("click",(()=>{document.querySelector("#header").scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.getElementsByName("fio"),t=document.getElementsByName("phone");e.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(n,"")}))})),t.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(o,"")}))}))})(),l({formId:"form1",someElem:[{type:"input",id:"calc-total"}]}),l({formId:"form2",someElem:[{type:"input",id:"calc-total"}]}),l({formId:"form3",someElem:[{type:"input",id:"calc-total"}]}),l({formId:"form4",someElem:[{type:"input",id:"calc-total"}]})})();